<!-- @author : Christopher Deshaies -->
<div>
  <h2>Planning</h2>
  <div class="d-flex justify-content-around">
    <div style="width:100%; text-align: center;" (click)='previusSemaine()' class="bouton-changement-planning">
      <i class="fas fa-arrow-left" ></i>&nbsp;Précédent
    </div>
    <label class="col-3" style="padding:0 10px">Planning pour la semaine du {{formattedDateDDMMYY(semaine[0])}} au {{formattedDateDDMMYY(semaine[6])}}</label>
    <div style="width:100%; text-align: center;" (click)='nextSemaine()' class="bouton-changement-planning">
        Suivant&nbsp;<i class="fas fa-arrow-right"></i>
    </div>
  </div>
  <div>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th></th>
          <th colspan="2">Dimanche {{formattedDateDDMM(semaine[0])}}</th>
          <th colspan="2">Lundi {{formattedDateDDMM(semaine[1])}}</th>
          <th colspan="2">Mardi {{formattedDateDDMM(semaine[2])}}</th>
          <th colspan="2">Mercredi {{formattedDateDDMM(semaine[3])}}</th>
          <th colspan="2">Jeudi {{formattedDateDDMM(semaine[4])}}</th>
          <th colspan="2">Vendredi {{formattedDateDDMM(semaine[5])}}</th>
          <th colspan="2">Samedi {{formattedDateDDMM(semaine[6])}}</th>
        </tr>
        <tr>
          <th>Employé(s)</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
          <th>M</th>
          <th>S</th>
        </tr>
      </thead>
      <tbody *ngIf="fPlanning">

        <tr *ngFor='let user of listUser | async ; let i = index'>
          <td>{{user.nom}} </td>
            <td *ngFor='let indice of taille;let j=index'>
            <div *ngIf='!fPlanning[i][j] && verificationMidi(j)' (click)='addPlanning(user.id, semaine[getSemaine(j)], true, false)' style="width: 100%; height: 40px;">&nbsp;</div>
            <div *ngIf='fPlanning[i][j] &&  verificationMidi(j)' (click)='deletePlanning(user.id, semaine[getSemaine(j)], true, false) ' style='width: 100%; height: 40px; background-color:#DC3545'>&nbsp;</div>
            <div *ngIf='!fPlanning[i][j] && !verificationMidi(j)' (click)='addPlanning(user.id, semaine[getSemaine(j)-1], false, true)' style="width: 100%; height: 40px;">&nbsp;</div>
            <div *ngIf='fPlanning[i][j] &&  !verificationMidi(j)' (click)='deletePlanning(user.id, semaine[getSemaine(j)-1], false, true) ' style='width: 100%; height: 40px; background-color: #DC3545'>&nbsp;</div>
            </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>